<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="..\static\style.css"> 
    <title>HealthProphet</title>
    <link rel="icon" type="image/x-icon" href="..\static\Assets\Logo\color_icon.svg">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <header>
        <img src="..\static\Assets\Logo\white_full.svg" alt="HealthProphet" class="white-logo" id="header-logo-brand">
        <script>
            const headerLogo = document.getElementById('header-logo-brand');
            // Th√™m s·ª± ki·ªán click v√†o n√∫t header-logo-brand
            headerLogo.addEventListener('click', function() {
                // Chuy·ªÉn slug b·∫±ng c√°ch thay ƒë·ªïi gi√° tr·ªã c·ªßa window.location.pathname
                window.location.pathname = '/home';
            });
        </script>
        <div class="background">
            <img src="..\static\Assets\IMG\Response-bg.png" alt="" class="img">
        </div>
    </header>
    <section>
        <div class="content-wrapped">
            <div class="intro-title">Gi·ªõi thi·ªáu v·ªÅ HealthProphet</div>
            <div class="body-text">HealthProphet l√† m·ªôt chatbot ti√™n ti·∫øn ƒë∆∞·ª£c thi·∫øt k·∫ø v·ªõi m·ª•c ƒë√≠ch gi√∫p ƒë·ª° nh·ªØng ng∆∞·ªùi ng·∫°i ƒëi kh√°m b√°c sƒ© trong vi·ªác d·ª± ƒëo√°n v√† c√≥ th·ªÉ ch·∫©n ƒëo√°n nh·ªØng b·ªánh t√¨nh d·ª•c. S·ª≠ d·ª•ng c√¥ng ngh·ªá tr√≠ tu·ªá nh√¢n t·∫°o, chatbot n√†y c√≥ th·ªÉ ƒë∆∞a ra c√°c d·ª± ƒëo√°n ban ƒë·∫ßu v·ªÅ c√°c tri·ªáu ch·ª©ng m√† ng∆∞·ªùi d√πng ƒëang g·∫∑p ph·∫£i v√† truy·ªÅn ƒë·∫°t nh·ªØng th√¥ng tin quan tr·ªçng li√™n quan ƒë·∫øn s·ª± l√¢y lan c·ªßa c√°c b·ªánh t√¨nh d·ª•c.</div>
            <div class="body-text">Ng∆∞·ªùi d√πng c√≥ th·ªÉ s·ª≠ d·ª•ng chatbot HealthProphet ƒë·ªÉ nh·∫≠n ƒë∆∞·ª£c s·ª± gi√∫p ƒë·ª° v√† h·ªó tr·ª£ trong vi·ªác t·ª± ƒë√°nh gi√° s·ª©c kh·ªèe c·ªßa m√¨nh. N·∫øu c·∫ßn, ng∆∞·ªùi d√πng c√≥ th·ªÉ truy v·∫•n th√¥ng tin chi ti·∫øt h∆°n v·ªÅ b·ªánh t√¨nh d·ª•c v√† c√°ch ph√≤ng ng·ª´a, t·ª´ ƒë√≥ c√≥ th·ªÉ ƒë∆∞a ra nh·ªØng quy·∫øt ƒë·ªãnh th√¥ng minh ƒë·ªÉ b·∫£o v·ªá s·ª©c kh·ªèe c·ªßa m√¨nh.</div>
            <div class="contact-block">
                <div class="message">K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</div>
                <div class="social-icon">
                    <a href="#" class="icon" ><img src="..\static\Assets\Icon\youtube.svg"></img></a>
                    <a href="#" class="icon" ><img src="..\static\Assets\Icon\twitter-fill.svg"></img></a>      
                </div>
            </div>
            <div class="copyright ">¬© Copyright by Python Team 2</div>
        </div>
        <div class="message-wrapped" id="chat-container">
            <div class="empty-state" id="emptyState">
                <img src="..\static\Assets\IMG\EmptyState-Illustration.png" alt="" width="260px">
                <div class="notification">
                    <div class="title">H·ªôp tin nh·∫Øn r·ªóng</div>
                    <div class="message">H√£y b·∫Øt ƒë·∫ßu tra c·ª©u th√¥ng tin<br>v√† ch·∫©n ƒëo√°n b·ªánh c√πng HealthProphet</div>    
                </div>
            </div>
            <div class="bottom" id="bottom-btn">
                <button class="primary" id="btn-primary">
                    <span class="title">B·∫Øt ƒë·∫ßu th√¥i</span>
                    <img class="icon" src="..\static\Assets\Icon\arrow-right.svg"></img>
                </button>
            </div>           
            <!-- Chat ·ªü ƒë√¢y sau ƒë√≥ d√πng script b√™n d∆∞·ªõi b·∫Øt s·ª± ki·ªán -->
            <div class="chat-area" id="chatbox">
                <div class="app-respone">
                    <div class="avt-container">
                        <div></div>
                        <img src="..\\static\\Assets\\Logo\\color_icon.svg" alt="">
                    </div>
                    <div class="chat-bubbles">
                        <div class="message-first"></div>
                        <div class="message">Ch√†o b·∫°n.</div>
                        <div class="message">T√¥i l√† HealthProphet - m·ªôt chatbot AI v·ªõi kh·∫£ nƒÉng tr·∫£ l·ªùi c√¢u h·ªèi v·ªÅ c√°c b·ªánh t√¨nh d·ª•c ph·ªï bi·∫øn.</div>
                        <div class="message">ƒê·ª´ng ng·∫ßn ng·∫°i khi ƒë·∫∑t c√¢u h·ªèi cho t√¥i nh√©!</div>
                    </div>
                </div>
                <div class="app-respone">
                    <div class="avt-container">
                        <div></div>
                        <img src="..\\static\\Assets\\Logo\\color_icon.svg" alt="">
                    </div>
                    <div class="chat-bubbles">
                        <div class="hint">N·∫øu b·∫°n g·∫∑p kh√≥ khƒÉn trong vi·ªác ƒë·∫∑t c√¢u h·ªèi<br>Ch·ªçn m·ªôt trong c√°c c√¢u h·ªèi c√≥ s·∫µn d∆∞·ªõi ƒë√¢y ƒë·ªÉ b·∫Øt ƒë·∫ßu nh√©! </div>
                        <div class="message">H√£y ch·ªçn v√†o c√¢u h·ªèi b√™n d∆∞·ªõi t√¥i s·∫Ω tr·∫£ l·ªùi gi√∫p b·∫°n nh·ªØng th·∫Øc m·∫Øc. </div>
                        <button class="message" id="question1">HealthProphet c√≥ th·ªÉ tr·∫£ l·ªùi ƒë∆∞·ª£c nh·ªØng th√¥ng tin n√†o?</button>
                        <button class="message" id="question2">T√¥i mu·ªën h·ªèi v·ªÅ c√°c tri·ªáu ch·ª©ng c·ªßa b·ªánh l·∫≠u.</button>
                        <button class="message" id="question3">Cho t√¥i h·ªèi b·ªánh h·∫° cam m·ªÅm (b·ªánh sole) l√† b·ªánh g√¨?</button>
                    </div>
                </div>
                <!-- <div class="user-chat"><div></div><div class="chat-bubbles"><div class="message">Ch·∫©n ƒëo√°n</div></div></div> -->
            </div>
            <div id="userInput">
                <input id="textInput" type="text" class="message" name="msg" placeholder="Aa">
                <!-- <input id="buttonInput" type="submit" value="Send"> -->
                <button class="secondary" id="buttonInput">
                    <img class="icon" src="..\\static\\Assets\\Icon\\send.svg"></img>
                </button>
            </div>
            <script>
                
                function getBotResponse(rawText) {
                    // rawText = $("#textInput").val();
                    var userHtml = '<div class="user-chat"><div></div><div class="chat-bubbles"><div class="message">' + rawText + '</div></div></div>';
                    $("#textInput").val("");
                    $("#chatbox").append(userHtml);
                    document.getElementById('userInput').scrollIntoView({ block: 'start', behavior: 'smooth' });

                    // Hi·ªán tin nh·∫Øn c·ªßa chatbot
                    $.get("/get", { msg: rawText }).done(function (data) {
                        var botHtml = '<div class="app-respone"><div class="avt-container"><div></div><img src="..\\static\\Assets\\Logo\\color_icon.svg" alt=""></div><div class="chat-bubbles"><div class="message">' + data + '</div></div>';
                        $("#chatbox").append(botHtml);
                        document.getElementById('userInput').scrollIntoView({ block: 'start', behavior: 'smooth' });

                        // Hi·ªán tin nh·∫Øn g·ª£i √Ω c·ªßa chatbot
                        $.get("/next", { chatbot_response: data}).done(function (nextdata) {
                            if (nextdata !== "Xin l·ªói t√¥i kh√¥ng bi·∫øt c√¢u tr·∫£ l·ªùi cho v·∫•n ƒë·ªÅ b·∫°n ƒëang g·∫∑p ph·∫£i üò•") {
                                var botHtml = '<div class="app-suggest"><div class="chat-bubbles"><div id="suggest-title">ü§ó C√≥ th·ªÉ b·∫°n mu·ªën h·ªèi ü§ó<br><div id="suggest-question">' + nextdata + '</div></div></div>';
                                $("#chatbox").append(botHtml);
                                document.getElementById('userInput').scrollIntoView({ block: 'start', behavior: 'smooth' });
                            }
                        });
                    });
                }
                
                // B·∫Øt s·ª± ki·ªán enter v√† b·∫•m n√∫t
                $("#textInput").keypress(function(e) {
                    if(e.which == 13) {
                        //getBotResponse();
                        getBotResponse(textInput.value);
                    }
                });
                $("#buttonInput").click(function() {
                  //getBotResponse();
                  getBotResponse(textInput.value);
                }) 

                question1.addEventListener('click', function () {
                    getBotResponse("HealthProphet c√≥ th·ªÉ tr·∫£ l·ªùi ƒë∆∞·ª£c nh·ªØng th√¥ng tin n√†o?");
                });  
                question2.addEventListener('click', function () {
                    getBotResponse("T√¥i mu·ªën h·ªèi v·ªÅ c√°c tri·ªáu ch·ª©ng b·ªánh l·∫≠u");
                });  
                question3.addEventListener('click', function () {
                    getBotResponse("Cho t√¥i h·ªèi b·ªánh h·∫° cam m·ªÅm (b·ªánh sole) l√† b·ªánh g√¨?");
                }); 

                const focusEndofChat = document.getElementById('chatbox');
                const lastMessage = focusEndofChat.lastElementChild;
                lastMessage.scrollIntoView();
                focusEndofChat.addEventListener('DOMNodeInserted', function () {
                        const lastMessage = focusEndofChat.lastElementChild;
                        lastMessage.scrollIntoView();
                    });
            </script>
        </div>
    </section>
</body>
</html>

<script>
    var rawText;
    const question1 = document.getElementById("question1");
    const question2 = document.getElementById("question2");
    const question3 = document.getElementById("question3");
    const textInput = document.getElementById("textInput");                
    const btnPrimary = document.getElementById('btn-primary');
    const chatBox = document.getElementById('chatbox');
    const userInput = document.getElementById('userInput');
    const bottomBtn = document.getElementById('bottom-btn');
    const emptyState = document.getElementById('emptyState'); 

    btnPrimary.addEventListener('click', function () {
            chatBox.style.display = 'block';
            userInput.style.display = 'flex';            
            bottomBtn.style.display = 'none';                      
            emptyState.style.display = 'none';                      
        });
</script>


